@model IEnumerable<CommonWeal.NGOWeb.ViewModel.Post>

@{
    ViewBag.Title = "Index";
}
<script src="~/Scripts/jquery-1.7.1.js"></script>
@*<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>*@
<link href="~/Content/chosen.css" rel="stylesheet" />
<script src="~/Scripts/chosen.jquery.min.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $("#selectcategory").change(function () {

            if ($(this).val() >= 0) {
               
                $.post("/post/GetPostByCategory?category=" + $(this).val(), function (result) {

                    // $("#loadMoreSection").append(result);
                    //    console.log(result);
                    if (result != null) {
                        $("#postsection").html("");
                        $("#loadMoreSection").html("");
                        $("#loadMoreSection").append(result);
                    }
                    //    //console.log(result);
                });
            }

        });

        $(".chosen-select-multiple").chosen();
        $('.chosen-select-multiple').change(function () {
            if ($(this).val() != null && $(this).val().length > 0) {
                $.each($(this).val(), function (key, value) {
                    if (value == 1) {
                        $('.chosen-select-multiple').val('').trigger('chosen:updated');
                        $('.chosen-select-multiple').val('1').trigger('chosen:updated');
                    }
                });
            }
            else { $('.chosen-select-multiple').val('').trigger('chosen:updated'); }
            console.log($('.chosen-select-multiple').val().length);
        });
        $("#selectcategory").change(function () {

            if ($(this).val() >= 0) {
                $.post("/post/GetPostByCategory2?category=" + $(this).val(), function (result) {

                    // $("#loadMoreSection").append(result);
                    //    console.log(result);
                    if (result != null) {
                        $("#postsection").html("");
                        $("#loadMoreSection").html("");
                        $("#loadMoreSection").append(result);
                    }
                    //    //console.log(result);
                });
            }

        });

        $("#selectcategory").chosen();
        $('#selectcategory').change(function () {
            if ($(this).val() != null && $(this).val().length > 0) {
                $.each($(this).val(), function (key, value) {
                    if (value == 1) {
                        $('#selectcategory').val('').trigger('chosen:updated');
                        $('#selectcategory').val('1').trigger('chosen:updated');
                    }
                });
            }
            else { $('#selectcategory').val('').trigger('chosen:updated'); }
            console.log($('#selectcategory').val().length);
        });


    });
  </script>
<div class="col-md-12">
   @Html.DropDownList("selectcategory", (SelectList)ViewBag.category, new { id = "selectcategory", @class = "form-control selectcategory",@multiple = "multiple" })
    <form method="post" action="~/NGOHome/PostImage" enctype="multipart/form-data" id="postform">
        <div class="form-inline">
          
            <a href="#" id="uploadbtn ">
                <span class="fa fa-picture-o fa-3x uploadimage" onclick="fileclick(); return false;"></span>
            </a>
            <a class="uploadimage"><span onclick="fileclick(); return false;"><strong>Upload Image</strong></span></a>
            <input type="file" id="file" name="file" data-badge="false" />
            <span id="uploadFileName"></span>
            @Html.DropDownList("category", (SelectList)ViewBag.categoryList, new { @class = "form-control chosen-select-multiple", @multiple = "multiple" })

        </div>
           
        <div class="form-horizontal">

            <div>
                @Html.TextArea("PostContent", null, new { id ="postContentTextArea", @class = "form-control", placeholder = "Write message for post" })
            </div>
              </div>

            <div id="menupost">
                <input type="submit" class="btn-primary right" id="post" value="Post" />
            </div>

        </div>
    </form>
     <div id="postsection">
    @Html.Partial("../UserHome/_Posts", Model)
   
         </div>
    <div id="loadMoreSection"></div>
<div style="text-align:center">
    <input type="button" style=" background: transparent; border: none;outline:none;margin-bottom:20px" value="load more" id="btnLoad"> 
</div>     

           
@section scripts{
    <script src="~/Scripts/Post/PostComment.js"></script>
}

